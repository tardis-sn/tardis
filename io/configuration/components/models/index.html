

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-53HJHD1BWS"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-53HJHD1BWS');
    </script>
    
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Models &mdash; tardis</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/plot_directive.css" />

  
    <link rel="shortcut icon" href="../../../../_static/tardis_logo.ico"/>
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
      <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@1.0.13/dist/embed-amd.min.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Using a custom density profile" href="densitycust/densitycust.html" />
    <link rel="prev" title="Plasma Configuration" href="../plasma.html" />
    <link href="../../../../_static/tardis.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            tardis
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../quickstart.html">Quickstart for TARDIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../how_to_guides.html">How-To Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../workflows.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/modules.html">API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Input/Output</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../hdf/index.html">Hierarchical Data Format (HDF5)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Configuration (Required Input)</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Configuration Components</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../supernova.html">Supernova Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../atomic/atomic_data.html">Atomic Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plasma.html">Plasma Configuration</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#model-configuration">Model Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#built-in-structure-density-and-abundance">Built-in Structure, Density, and Abundance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#csvy-model">CSVY Model</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../montecarlo.html">Monte Carlo Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../spectrum.html">Spectrum Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../debug.html">Debug Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../example.html">TARDIS Example Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../config_validator.html">Configuration Validator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial_read_configuration.html">Reading a Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../model/index.html">Reading Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../optional/index.html">Optional Inputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../output/index.html">Additional Outputs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Analyzing Tardis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../analyzing_tardis/visualization/index.html">Visualization Tools &amp; Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../analyzing_tardis/spectrum/index.html">Analyzing TARDIS Spectra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../analyzing_tardis/liv_plot_notebook.html">Analyzing Last Interaction Velocity (LIV) Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../analyzing_tardis/rpacket_plot_notebook.html">Analysing Montecarlo Packets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../analyzing_tardis/analysing_convergence_plot.html">Convergence Plots</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Physics Walkthrough</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../physics/intro/index.html">Physics Walkthrough Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../physics/setup/index.html">Setting Up the Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../physics/montecarlo/index.html">Monte Carlo Iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../physics/update_and_conv/update_and_conv.html">Updating Plasma and Convergence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../physics/spectrum/index.html">Spectrum Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../physics/tardisgamma/index.html">TARDIS-High Energy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing to TARDIS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing/CONTRIBUTING.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing/development/index.html">Developer Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing/tools/index.html">Developer Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing/CHANGELOG.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing/in_progress/index.html">Features In-Progress</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../resources/credits.html">Credits &amp; Publication Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../resources/research_done_using_TARDIS/research_papers.html">Papers Using TARDIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../resources/code_comparison/index.html">Code Comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../resources/zreferences.html">References and Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">tardis</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Configuration (Required Input)</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Configuration Components</a></li>
      <li class="breadcrumb-item active">Models</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/io/configuration/components/models/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="models">
<span id="model-csvy-and-config"></span><h1>Models<a class="headerlink" href="#models" title="Link to this heading">¶</a></h1>
<p>TARDIS requires a model of the ejecta in order to run a simulation. A model typically includes information
for the velocity shell structure, density, and abundances. <strong>See</strong> <a class="reference internal" href="../../../../physics/setup/model.html"><span class="doc">Model</span></a> <strong>for more information on the
TARDIS model</strong>. TARDIS offers two ways of specifying the model: either directly in the configuration YAML file
or separately in a CSVY file. See <a class="reference external" href="https://csvy.org/">here</a> for an explanation of the CSVY file format.</p>
<p>TARDIS has several built-in models for the shell structure, density, and abundance. If only these are being used,
we recommend using the YAML configuration method. For creating a custom model (which will be discussed below), we
recommend using the CSVY method.</p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#model-configuration" id="id2">Model Configuration</a></p>
<ul>
<li><p><a class="reference internal" href="#custom-model-configurations" id="id3">Custom Model Configurations</a></p></li>
<li><p><a class="reference internal" href="#custom-model-tutorial" id="id4">Custom Model Tutorial</a></p></li>
<li><p><a class="reference internal" href="#model-converters" id="id5">Model Converters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#built-in-structure-density-and-abundance" id="id6">Built-in Structure, Density, and Abundance</a></p>
<ul>
<li><p><a class="reference internal" href="#structure" id="id7">Structure</a></p></li>
<li><p><a class="reference internal" href="#density" id="id8">Density</a></p></li>
<li><p><a class="reference internal" href="#abundance" id="id9">Abundance</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#csvy-model" id="id10">CSVY Model</a></p>
<ul>
<li><p><a class="reference internal" href="#csvy-model-tutorial" id="id11">CSVY Model Tutorial</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="model-configuration">
<span id="model-config"></span><h2><a class="toc-backref" href="#id2" role="doc-backlink">Model Configuration</a><a class="headerlink" href="#model-configuration" title="Link to this heading">¶</a></h2>
<p>The following schema shows how the model section of the YAML configuration is set up:</p>
<p>Several examples are shown in the following sections; additionally, see <a class="reference internal" href="../../example.html#tardis-example"><span class="std std-ref">TARDIS Example Configuration</span></a> to see
an example model configuration section within the full TARDIS configuration. This configuration allows
for both built-in structures and abundances, which will be described in later sections, as well as custom
models for the shell structure and abundances. For the latter, while we recommend using the CSVY model,
one can specify custom structures and abundances using other files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If using a custom shell structure, you must also use a custom density profile (and vice versa), as
they are recorded in the same file (see below). Therefore, if you wish to use a built-in shell
structure you must also use a built-in density profile, and vice versa.</p>
</div>
<section id="custom-model-configurations">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Custom Model Configurations</a><a class="headerlink" href="#custom-model-configurations" title="Link to this heading">¶</a></h3>
<p>The following two sections demonstrate how to specify custom structures and abundances in the
model configuration.</p>
<p>For example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">model</span><span class="p">:</span>
<span class="w">    </span><span class="nt">structure</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">file</span>
<span class="w">        </span><span class="nt">filename</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">density.dat</span>
<span class="w">        </span><span class="nt">filetype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">simple_ascii</span>
<span class="w">        </span><span class="nt">v_inner_boundary</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11000 km/s</span>
<span class="w">        </span><span class="nt">v_outer_boundary</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20000 km/s</span>
</pre></div>
</div>
<p>In this example, our configuration references a file named <code class="docutils literal notranslate"><span class="pre">density.dat</span></code>. For more information on what this file
would entail, see:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="densitycust/densitycust.html">Using a custom density profile</a></li>
</ul>
</div>
<p>For example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">model</span><span class="p">:</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">abundances</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">file</span>
<span class="w">        </span><span class="nt">filename</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">abund.dat</span>
<span class="w">        </span><span class="nt">filetype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">simple_ascii</span>
</pre></div>
</div>
<p>In this example, our configuration references a file named <code class="docutils literal notranslate"><span class="pre">abund.dat</span></code>. For more information on what this file
would entail, see:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="abundancecust/abundancecust.html">Using a custom stratified composition</a></li>
</ul>
</div>
</section>
<section id="custom-model-tutorial">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Custom Model Tutorial</a><a class="headerlink" href="#custom-model-tutorial" title="Link to this heading">¶</a></h3>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="Custom_TARDIS_Model_Tutorial.html">How to run TARDIS with a custom ejecta model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Custom_TARDIS_Model_Tutorial.html#Your-custom-density-file">Your custom density file</a></li>
<li class="toctree-l2"><a class="reference internal" href="Custom_TARDIS_Model_Tutorial.html#Your-custom-abundance-file">Your custom abundance file</a></li>
<li class="toctree-l2"><a class="reference internal" href="Custom_TARDIS_Model_Tutorial.html#Running-TARDIS-with-the-custom-files">Running TARDIS with the custom files</a></li>
<li class="toctree-l2"><a class="reference internal" href="Custom_TARDIS_Model_Tutorial.html#Specifying-boundary-velocities-in-the-config-file">Specifying boundary velocities in the config file</a></li>
<li class="toctree-l2"><a class="reference internal" href="Custom_TARDIS_Model_Tutorial.html#Example-1)-v_inner_boundary-lower-than-first-velocity-in-density-file">Example 1) v_inner_boundary lower than first velocity in density file</a></li>
<li class="toctree-l2"><a class="reference internal" href="Custom_TARDIS_Model_Tutorial.html#Example-2)-v_outer_boundary-larger-than-last-velocity-in-density-file">Example 2) v_outer_boundary larger than last velocity in density file</a></li>
<li class="toctree-l2"><a class="reference internal" href="Custom_TARDIS_Model_Tutorial.html#Example-3)-v_boundaries-in-config-file-are-within-density-file-velocity-range">Example 3) v_boundaries in config file are within density file velocity range</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="model-converters">
<span id="converters"></span><h3><a class="toc-backref" href="#id5" role="doc-backlink">Model Converters</a><a class="headerlink" href="#model-converters" title="Link to this heading">¶</a></h3>
<p>There are a variety of formats for models from other codes
(both hydro and radiative transfer) that can be converted to TARDIS input files.
Here we aim to provide converters for the most commonly used file formats.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="converters/cmfgen.html">Convert CMFGEN files to TARDIS file format</a></li>
<li class="toctree-l1"><a class="reference internal" href="converters/arepo_to_tardis.html">Converting Arepo snapshots to be usable by TARDIS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="converters/arepo_to_tardis.html#What-is-Arepo?">What is Arepo?</a></li>
<li class="toctree-l2"><a class="reference internal" href="converters/arepo_to_tardis.html#Loading-the-simulation-data">Loading the simulation data</a></li>
<li class="toctree-l2"><a class="reference internal" href="converters/arepo_to_tardis.html#Extracting-a-profile-and-converting-it-to-a-csvy-file">Extracting a profile and converting it to a csvy file</a></li>
<li class="toctree-l2"><a class="reference internal" href="converters/arepo_to_tardis.html#Plotting-the-data">Plotting the data</a></li>
<li class="toctree-l2"><a class="reference internal" href="converters/arepo_to_tardis.html#Manually-rebinning-the-data">Manually rebinning the data</a></li>
<li class="toctree-l2"><a class="reference internal" href="converters/arepo_to_tardis.html#Selecting-a-specific-region">Selecting a specific region</a></li>
</ul>
</li>
</ul>
</div>
</section>
</section>
<section id="built-in-structure-density-and-abundance">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Built-in Structure, Density, and Abundance</a><a class="headerlink" href="#built-in-structure-density-and-abundance" title="Link to this heading">¶</a></h2>
<p>TARDIS’s built-in models for structure, density, and abundance are described in the following sections:</p>
<section id="structure">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Structure</a><a class="headerlink" href="#structure" title="Link to this heading">¶</a></h3>
<p>When using the built-in structure functionality, the code requires two sections (<code class="docutils literal notranslate"><span class="pre">velocities</span></code> and <code class="docutils literal notranslate"><span class="pre">densities</span></code>) and a
parameter <code class="docutils literal notranslate"><span class="pre">no_of_shells</span></code>. <code class="docutils literal notranslate"><span class="pre">no_of_shells</span></code> is the requested number of shells for a model. See
<a class="reference internal" href="../../../../physics/setup/model.html#Shell-Structure"><span class="std std-ref">Shell Structure</span></a> for more information.</p>
<p>We present an example of the above schema:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">model</span><span class="p">:</span>
<span class="w">    </span><span class="nt">structure</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">specific</span>
<span class="w">        </span><span class="nt">velocity</span><span class="p">:</span>
<span class="w">            </span><span class="nt">start</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000 km/s</span>
<span class="w">            </span><span class="nt">stop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2000 km/s</span>
<span class="w">            </span><span class="nt">num</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
<span class="w">        </span><span class="nt">density</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">branch85_w7</span><span class="w"> </span><span class="c1">#see density schemas below for all options in the density section</span>
</pre></div>
</div>
</section>
<section id="density">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Density</a><a class="headerlink" href="#density" title="Link to this heading">¶</a></h3>
<p>In the <code class="docutils literal notranslate"><span class="pre">densities</span></code> section of the specific structure, the <code class="docutils literal notranslate"><span class="pre">type</span></code> parameter decides on the parameters.
The physics of these density models is further discussed in <a class="reference internal" href="../../../../physics/setup/model.html"><span class="doc">Model</span></a>.</p>
<p>For example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">model</span><span class="p">:</span>
<span class="w">    </span><span class="nt">structure</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">specific</span>

<span class="w">        </span><span class="nt">density</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">branch85_w7</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../../../../physics/setup/model.html#Branch85-W7-Density"><span class="std std-ref">Branch85 W7 Density</span></a>.</p>
<p>For example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">model</span><span class="p">:</span>
<span class="w">    </span><span class="nt">structure</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">specific</span>

<span class="w">        </span><span class="nt">density</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exponential</span>
<span class="w">            </span><span class="nt">rho_0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e-10 g/cm^3</span>
<span class="w">            </span><span class="nt">v_0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10000 km/s</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../../../../physics/setup/model.html#Exponential-Density"><span class="std std-ref">Exponential Density</span></a>.</p>
<p>For example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">model</span><span class="p">:</span>
<span class="w">    </span><span class="nt">structure</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">specific</span>

<span class="w">        </span><span class="nt">density</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">power_law</span>
<span class="w">            </span><span class="nt">rho_0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e-10 g/cm^3</span>
<span class="w">            </span><span class="nt">v_0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10000 km/s</span>
<span class="w">            </span><span class="nt">exponent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../../../../physics/setup/model.html#Power-Law-Density"><span class="std std-ref">Power Law Density</span></a>.</p>
<p>For example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">model</span><span class="p">:</span>
<span class="w">    </span><span class="nt">structure</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">specific</span>

<span class="w">        </span><span class="nt">density</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uniform</span>
<span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e-10 g/cm^3</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../../../../physics/setup/model.html#Uniform-Density"><span class="std std-ref">Uniform Density</span></a>.</p>
</section>
<section id="abundance">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Abundance</a><a class="headerlink" href="#abundance" title="Link to this heading">¶</a></h3>
<p>This section can be used to configure uniform abundances for all shells, by giving the atom or isotope name
and a relative abundance fraction. If it does not add up to 1, TARDIS will warn – but normalize the numbers.</p>
<p>For example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">model</span><span class="p">:</span>

<span class="w">    </span><span class="nt">abundances</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uniform</span>
<span class="w">        </span><span class="nt">H</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.2</span>
<span class="w">        </span><span class="nt">He</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span>
<span class="w">        </span><span class="nt">O</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.15</span>
<span class="w">        </span><span class="nt">Ni56</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.25</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../../../../physics/setup/model.html#Abundance"><span class="std std-ref">Abundance</span></a>.</p>
</section>
</section>
<section id="csvy-model">
<span id="csvy-models"></span><h2><a class="toc-backref" href="#id10" role="doc-backlink">CSVY Model</a><a class="headerlink" href="#csvy-model" title="Link to this heading">¶</a></h2>
<p>TARDIS allows users to use a CSVY file to input information about the model. To do this, instead of a
<code class="docutils literal notranslate"><span class="pre">model</span></code> section, one includes <code class="docutils literal notranslate"><span class="pre">csvy_model:</span> <span class="pre">&lt;file</span> <span class="pre">path</span> <span class="pre">to</span> <span class="pre">CSVY</span> <span class="pre">file&gt;</span></code> in the main TARDIS configuration
file.</p>
<p>The CSVY model has a YAML part as well as a CSV part, separated by the YAML delimiter <code class="docutils literal notranslate"><span class="pre">---</span></code>. This means
that each CSVY model file has the following structure: The first line of the file is the YAML delimiter,
followed by the YAML portion of the CSVY model, then another line with just the YAML delimiter,
and finally the CSV portion of the CSVY file. This is shown in the example CSVY file later in this section.</p>
<p>The YAML portion of the CSVY file allows the user to use most of the features of the YAML model configuration,
as shown in the schema below:</p>
<p>The CSV part of the CSVY file creates a table that can include information about shell velocities, densities,
and abundances in each cell. The column headers (the first row of the CSV part) may contain <code class="docutils literal notranslate"><span class="pre">velocity</span></code>,
<code class="docutils literal notranslate"><span class="pre">density</span></code>, <code class="docutils literal notranslate"><span class="pre">t_rad</span></code>, <code class="docutils literal notranslate"><span class="pre">dilution_factor</span></code>, or the name of any element or isotope (e.g. <code class="docutils literal notranslate"><span class="pre">H</span></code>, <code class="docutils literal notranslate"><span class="pre">Mg</span></code>,
<code class="docutils literal notranslate"><span class="pre">Ni56</span></code>). These columns are explained in the following example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>---
name: csvy_full
model_density_time_0: 1 day
model_isotope_time_0: 0 day
description: Example csvy config file for TARDIS.
tardis_model_config_version: v1.0
datatype:
  fields:
    -  name: velocity
       unit: km/s
       desc: velocities of shell outer boundaries.
    -  name: density
       unit: g/cm^3
       desc: density of shell.
    -  name: t_rad
       unit: K
       desc: radiative temperature.
    -  name: dilution_factor
       desc: dilution factor of shell.
    -  name: H
       desc: fractional H abundance.
    -  name: He
       desc: fractional He abundance.
    -  name: Ni56
       desc: fractional Ni56 abundance.

---
velocity,density,t_rad,dilution_factor,H,He,Ni56
9000, 5e-10, 7000, .9, 1.0, 1.0, 1.0
10500, 2.0e-10, 7000, .8, 0.0, 0.99, 0.01
12000, 9e-11, 7000, .1, 0.4, 0.58, 0.02
</pre></div>
</div>
<p>Notice that for each column that is used in the CSV section of the file, there is a corresponding field under
<code class="docutils literal notranslate"><span class="pre">datatype</span></code> in the YAML section of the file. In our example, each of the fields under <code class="docutils literal notranslate"><span class="pre">datatype</span></code> has a brief
description to go along with it. While the description is not necessary for any of the fields, the unit section
is required for <code class="docutils literal notranslate"><span class="pre">velocity</span></code>, <code class="docutils literal notranslate"><span class="pre">density</span></code>, and <code class="docutils literal notranslate"><span class="pre">t_rad</span></code>.</p>
<p>Since the <code class="docutils literal notranslate"><span class="pre">velocity</span></code> column contains the outer shell velocity, the first entry in the velocity column is the
velocity of the photosphere – i.e. the inner boundary of the computational domain (see <a class="reference internal" href="../../../../physics/setup/model.html"><span class="doc">Model</span></a>).
Consequently, <strong>none of the other information in the first row is used</strong>. In our example, there are only two
shells, and the first shell will have an inner boundary with a velocity of <span class="math notranslate nohighlight">\(9000 \mathrm{ km/s}\)</span>, an outer boundary
with a velocity of <span class="math notranslate nohighlight">\(10500 \mathrm{ km/s}\)</span>, a density of <span class="math notranslate nohighlight">\(2.0*10^{-10} \mathrm{ g/cm^3}\)</span>, a dilution
factor of .8, etc.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>None of the CSV columns are required. However, if <code class="docutils literal notranslate"><span class="pre">velocity</span></code>, <code class="docutils literal notranslate"><span class="pre">density</span></code>, or the abundances are missing,
they must be specified in the YAML portion of the file. If <code class="docutils literal notranslate"><span class="pre">t_rad</span></code> or <code class="docutils literal notranslate"><span class="pre">dilution_factor</span></code> are missing,
they will be automatically calculated (see <a class="reference internal" href="../../../../physics/setup/model.html"><span class="doc">Model</span></a>).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">t_rad</span></code> and <code class="docutils literal notranslate"><span class="pre">dilution_factor</span></code> are the values of the temperature and dilution factor for the first
iteration, and will be updated in subsequent iterations (see <a class="reference internal" href="../../../../physics/update_and_conv/update_and_conv.html"><span class="doc">Updating Plasma and Convergence</span></a>).
To prevent these quantities from being changed, you must set the damping constant to zero in the <a class="reference internal" href="../montecarlo.html#damped-config"><span class="std std-ref">Damped Convergence
Configuration</span></a> in the Monte Carlo section of the configuration file.</p>
</div>
<section id="csvy-model-tutorial">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">CSVY Model Tutorial</a><a class="headerlink" href="#csvy-model-tutorial" title="Link to this heading">¶</a></h3>
<p>Coming soon!</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../plasma.html" class="btn btn-neutral float-left" title="Plasma Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="densitycust/densitycust.html" class="btn btn-neutral float-right" title="Using a custom density profile" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2013-2025, TARDIS Collaboration.
      <span class="lastupdated">Last updated on 19 May 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>