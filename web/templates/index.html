<!DOCTYPE html>
<html lang="en" ng-app="tardisApp">
<head>
  <meta charset="UTF-8">
  <title>Tardis web interface</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/static/app/style.css">
</head>
<body ng-controller="MainCtrl as main">

  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">
          TARDIS
        </a>
      </div>
      <div class="collapse navbar-collapse nav-collapse"></div>
    </div>
  </nav>

  <div class="container">
    
    <div class="row  row-centered">
      <div class="col-md-12">
        <h2> web interface for Tardis</h2>
        <p>Use this online form to help you to create the input file for tardis-sn, for detail documentation about each field please read <a href="http://tardis.readthedocs.org/en/latest/configuration/configuration.html">this link</a></p>
        <div class="checkbox">
          <label>
            <input type="checkbox" ng-model="main.advanced"> Show advanced options
          </label>
        </div>

        <div class="col-xs-12 col-centered input-form">
          <ul class="nav nav-tabs">
            <li role="presentation" ng-repeat="tab in main.tabs" 
                ng-click="main.changeTab($index, tab)" ng-class="{active: main.tabIndex == $index}">
              <a href="#">{$ tab.name $}</a>
            </li>
          </ul>
        </div>
        <form novalidate class="form-horizontal">

          <div class="col-xs-12 col-centered input-form padding">
            <div ng-repeat="tab in main.tabs" ng-show="main.tabIndex == $index">
              <div ng-include src="'/static/app/' + tab.template"></div>
            </div>
          </div>         

          <div class="col-sm-12 col-centered input-form">
            <button class="btn btn-success pull-left" ng-click="main.prevTab()" ng-hide="main.tabIndex == 0">
              <i class="glyphicon glyphicon-chevron-left"></i>
              prev
            </button>
            <button class="btn btn-success pull-right" ng-click="main.nextTab()" 
                    ng-hide="main.tabIndex == main.tabs.length - 1">
              next
              <i class="glyphicon glyphicon-chevron-right"></i>
            </button>
            <button class="btn btn-info pull-right" ng-click="main.createYamlFile()" 
                    ng-show="main.tabIndex == main.tabs.length - 1">
              <i class="glyphicon glyphicon-log-out"></i>
              generate input file
            </button>
          </div>

        </form>

      </div>
    </div>

  </div>

  <!-- help modal to download the created file -->
  <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" 
        aria-hidden="true" id="donwloadFile">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel">configuration complete</h4>
        </div>
        <div class="modal-body">
          <a href="/static/input_data.yml" class="btn btn-primary" download>
            <i class="glyphicon glyphicon-save"></i>
            Download input file
          </a>
          <div class="clearfix"></div>
          <p>after download the run tardis with:</p>
          <pre>tardis input_data.yml output_spectrum.dat</pre>
          <p>Then plot the output_spectrum.dat with your favourite plotting program. Here’s an example how to do this with python. (The only thing you need to install is ipython and matplotlib - in addition to TARDIS’s requirements)</p>
<pre>
ipython --pylab
>>> tardis_spec = loadtxt('output_spectrum.dat')
>>> plot(tardis_spec[:,0], tardis_spec[:,1])
</pre>
        </div>
      </div>
    </div>
  </div>
  
  

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
  <script src="https://code.angularjs.org/1.3.14/angular-resource.min.js"></script>

  <script src="/static/app.js"></script>
  <script src="/static/app/input-data/tag.directive.js"></script>
  <script src="/static/app/input-data/file.directive.js"></script>
  <script src="/static/app/input-data/quantity.field.directive.js"></script>
  <script src="/static/app/main.ctrl.js"></script>
</body>
</html>